---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header';
import Footer from '../../../components/Footer';
import { vocabularyRepo } from '../../../lib/repositories/vocabulary';

// Fetch vocabulary data
const vocabulary = await vocabularyRepo.getAll();
---

<Layout title="Vocabulary - Dashboard">
  <Header client:load />
  <main class="flex-1">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="mb-8">
        <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4">
          Vocabulary Management
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-400">
          {vocabulary.length} words in your collection
        </p>
      </div>

      {/* Simple Table */}
      <div class="card overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                Word
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                Phonetic
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                Level
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                Band
              </th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
            {vocabulary.slice(0, 50).map((item) => (
              <tr class="hover:bg-gray-50 dark:hover:bg-gray-800">
                <td class="px-6 py-4 whitespace-nowrap">
                  <a href={`/vocabulary/${item.word}`} class="text-ielts-600 dark:text-ielts-400 hover:underline font-semibold">
                    {item.word}
                  </a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                  {item.phonetic}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                  {item.level}
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ielts-100 text-ielts-800 dark:bg-ielts-900 dark:text-ielts-200">
                    {item.band}
                  </span>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {vocabulary.length > 50 && (
        <div class="mt-6 text-center">
          <p class="text-gray-600 dark:text-gray-400">
            Showing 50 of {vocabulary.length} words. <a href="/vocabulary" class="text-ielts-600 dark:text-ielts-400 hover:underline">View all â†’</a>
          </p>
        </div>
      )}
    </div>
  </main>
  <Footer />
</Layout>
